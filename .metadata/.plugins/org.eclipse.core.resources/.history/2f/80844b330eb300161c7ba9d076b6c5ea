package hotel_data_servlmpl;

import java.rmi.RemoteException;
import java.util.ArrayList;

import PO.CommentPO;
import PO.HotelPO;
import comment_data_servlmpl.CommentDataServlmpl;
import commet_data_serv.CommentDataServ;
import datahelper.CompaniesDataServlmpl;
import datahelper.DataFactorylmpl;
import datahelperinterface.CompaniesDataServ;
import datahelperinterface.DataFactory;
import datahelperinterface.HotelDataHelper;
import hotel_data_serv.HotalDataServ;
import room_data_serv.RoomDataServ;
import room_data_servlmpl.RoomDataServlmpl;
import strategy_data_serv.HotelStrategyDataServ;
import strategy_data_servlmpl.HotelStrategyDataServlmpl;

public class HotelDataServlmpl implements HotalDataServ{
	private ArrayList<HotelPO> list;
	private DataFactory dataFactory;
	private CommentDataServ commentDataServ;
	private CompaniesDataServ companiesDataServ;
	private RoomDataServ roomDataServ;
	private HotelStrategyDataServ hotelStrategyDataServ;
	private HotelDataHelper hotelDataHelper;
	private static HotelDataServlmpl hotelDataServlmpl;
	
	public static HotelDataServlmpl getInstance(){
		if(hotelDataServlmpl==null)
			hotelDataServlmpl=new HotelDataServlmpl();
		return hotelDataServlmpl;
	}
	
	private HotelDataServlmpl(){
		if(list==null){
			dataFactory=new DataFactorylmpl();
			commentDataServ=CommentDataServlmpl.getInstance();
			companiesDataServ=CompaniesDataServlmpl.getInstance();
			roomDataServ=RoomDataServlmpl.getInstance();
			hotelStrategyDataServ=HotelStrategyDataServlmpl.getInstance();
			hotelDataHelper=dataFactory.getHotelDataHelper();
			list=hotelDataHelper.getAll();
		}
	}

	@Override
	public boolean insertHotel(HotelPO hotel) throws RemoteException {
		boolean tag=true;
		for(int i=0;i<hotel.getComment().size();i++){
			if(!tag)
				break;
			tag=commentDataServ.insert(new CommentPO(hotel.getName(),hotel.getComment().get(i)));
		}
		
		for(int i=0;i<hotel.getCompanies().size();i++){
			if(!tag)
				break;
			tag=companiesDataServ.insertCompany(new Company(hotel.getName(),hotel.getCompanies().get(i)));
		}
		for(int i=0;i<hotel.getRoom().size();i++){
			if(!tag)
				break;
			tag=roomDataServ.insertRoom(hotel.getRoom().get(i));
		}
		for(int i=0;i<hotel.getStrategy().size();i++){
			if(!tag)
				break;
			tag=hotelStrategyDataServ.insertHotelStrategy(hotel.getStrategy().get(i));
		}
	}

	@Override
	public HotelPO getHotel(String name) throws RemoteException {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public boolean deleteHotel(String name) throws RemoteException {
		return false;	
	}

	@Override
	public boolean modifiedHotel(HotelPO hotel) throws RemoteException {
		return false;
	}

	@Override
	public ArrayList<HotelPO> getHotelList(String businesscircle) throws RemoteException {
		// TODO Auto-generated method stub
		return null;
	}

}
